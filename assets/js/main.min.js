window.onload=()=>{window.scrollTo(0,0)},document.addEventListener("DOMContentLoaded",(()=>{RunUniversalPageCode();const e=document.querySelector("body");if(!e)return void console.error("Greška: Nije pronađen body na stranici.");const t=e.dataset.page;t?"index"===t?RunIndexPageCode():"products"===t?RunProductsPageCode():"contact"===t?RunContactPageCode():"author"===t||"message"===t||console.error(`Stranica sa imenom '${t}' ne postoji. Proveriti vrednost data-page atributa.`):console.error("Greška: Nije pronadjen data-page atribut u body.")}));const RunUniversalPageCode=()=>{const e=document.getElementById("overlay");if(!e)return;e.classList.add("fade-out"),setTimeout((()=>e.remove()),1600);const t=document.getElementById("main-nav");if(!t)return;window.addEventListener("scroll",(()=>{t.classList.toggle("main-nav-alt",window.scrollY>0)}));const n=document.getElementById("top-btn");n&&n.addEventListener("click",(()=>{window.scrollTo(0,0)}))},products=[{name:"Sapphire Dining Table",price:3850,category:"luxury",img:"assets/img/tables/luxury/sapphire-table.jpg",description:"Table only, handcrafted epoxy top"},{name:"Prestige Console Table",price:2e3,category:"luxury",img:"assets/img/tables/luxury/prestige-console.jpg",description:"Perfect for hallway or living room"},{name:"Rustic Farmhouse Table",price:1100,category:"kitchen",img:"assets/img/tables/kitchen/rustic-farmhouse.jpg",description:"Handcrafted from reclaimed wood"},{name:"Nordic Coffee Table",price:480,category:"living-room",img:"assets/img/tables/living-room/nordic-coffee.jpg",description:"Scandinavian minimalist style"},{name:"Ebony Full Table",price:1500,category:"living-room",img:"assets/img/tables/living-room/ebony-table.jpg",description:"Ebony table only with epoxy top"},{name:"Maple Epoxy Desk",price:2100,category:"luxury",img:"assets/img/tables/kitchen/maple-table.jpg",description:"Stylish workspace with epoxy top"},{name:"Cedar Dining Set",price:650,category:"sets",img:"assets/img/tables/sets/cedar-set.jpg",description:"Cedar wood dining table with 2 chairs"},{name:"Luxury Oak Dining Table",price:3350,category:"luxury",img:"assets/img/tables/luxury/luxury-oak.jpg",description:"Seats 8, handcrafted with oak and epoxy"},{name:"Venus Side Table",price:650,category:"living-room",img:"assets/img/tables/living-room/venus-side.jpg",description:"Elegant side table for any modern interior"},{name:"Oak Dining Set",price:3800,category:"sets",img:"assets/img/tables/sets/oak-set.jpg",description:"Oak wood table with 6 leather chairs"},{name:"Sublime Oak Table",price:1800,category:"kitchen",img:"assets/img/tables/kitchen/sublime-oak.jpg",description:"Elegant kitchen dining table"}],RunIndexPageCode=()=>{const e=document.getElementById("hero-background"),t=document.getElementById("arrow");if(!e&&!t)return;window.addEventListener("scroll",(()=>{e&&e.classList.toggle("hero-background-alt",window.scrollY>0),t&&t.classList.toggle("arrow-alt",window.scrollY>0)}));const n=document.getElementById("about-btn");if(!n)return;n.addEventListener("click",(()=>{const e=document.getElementById("about-section");e&&e.scrollIntoView({behavior:"smooth"})}));const o=document.getElementById("featured-btn");if(!o)return;o.addEventListener("click",(()=>{const e=document.getElementById("featured-anchor");e&&e.scrollIntoView({behavior:"smooth"})}));const a=document.querySelector("#carousel-first"),r=document.querySelector("#carousel-second");if(!a||!r)return;let s=0;setInterval((()=>{s=(s+2)%products.length;const e=(s+1)%products.length;a.src=products[s].img,r.src=products[e].img,a.classList.remove("flash-zoom"),a.offsetWidth,a.classList.add("flash-zoom"),r.classList.remove("flash-zoom"),r.offsetWidth,r.classList.add("flash-zoom")}),7e3)},catalogueContent=document.getElementById("catalogue-content"),RenderProducts=e=>{catalogueContent.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.className="col-12 col-sm-12 col-lg-4 col-md-6 mb-4",t.innerHTML=`\n <div class="card h-100 shadow-sm color-background-primary">\n <img src="${e.img}" class="card-img-top img-fluid h-100" alt="${e.name}">\n <div class="card-body d-flex flex-column">\n <h6 class="card-title text-uppercase color-text-secondary">${e.name}</h6>\n <p class="card-text text-truncate">${e.description}</p>\n <div class="mt-auto d-flex justify-content-between align-items-center">\n <span class="fw-bold btn btn-sm color-foreground-primary">$${e.price}</span>\n </div>\n </div>\n </div>\n `,catalogueContent.appendChild(t)}))},RunProductsPageCode=()=>{RenderProducts(products);const e=document.getElementById("price-filter"),t=document.getElementById("category-filter");document.getElementById("apply-filters").addEventListener("click",(()=>{let n=products;const o=e.value;"all"!==o&&(n=n.filter((e=>"low"===o?e.price<=1e3:"medium"===o?e.price>1e3&&e.price<=3e3:"high"===o?e.price>3e3:void 0)));const a=t.value;"all"!==a&&(n=n.filter((e=>e.category===a))),RenderProducts(n)})),document.querySelectorAll(".detail-item").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement.querySelector(".detail-content");t.classList.contains("open")||(document.querySelectorAll(".detail-content").forEach((e=>{e.classList.remove("open"),e.parentElement.querySelector(".detail-item").classList.remove("open-panel")})),t.classList.add("open"),e.classList.add("open-panel"))}))}))},ShowError=(e,t,n,o,a)=>{t?n?(t.style.border="2px solid red","regex-fail"===e?n.innerHTML=`${o} <span style="color:red;">* Wrong format!</span>`:"no-input"===e?n.innerHTML=`${o} <span style="color:red;">* Can't be empty!</span>`:"max-length"===e&&(n.innerHTML=`${o} <span style="color:red;">* Maximum ${a} characters!</span>`)):console.error("Prosledjen label nije definisan."):console.error("Prosledjeno polje nije definisano.")},ClearError=(e,t,n)=>{e&&t&&(e.style.border="",t.innerHTML=n)},ValidateRegex=(e,t)=>e.test(t),ValidateRadioGroup=(e,t,n,o)=>document.querySelector(`input[name="${e}"]:checked`)?(ClearError(null,n,o),!0):(ShowError("no-input",t,n,o,0),n.innerHTML=`${o} <span style="color:red;">* Please select one!</span>`,!1),ValidateFormInput=()=>{let e=!0;const t=/^[A-ZČĆŠĐŽ][a-zčćšđž]+(?:\s[A-ZČĆŠĐŽ][a-zčćšđž]+)*$/,n=document.getElementById("firstName"),o=document.getElementById("firstNameLabel"),a=n?n.value:"";ClearError(n,o,"First name"),""===a?(ShowError("no-input",n,o,"First name"),e=!1):ValidateRegex(t,a)||(ShowError("regex-fail",n,o,"First name"),e=!1);const r=document.getElementById("lastName"),s=document.getElementById("lastNameLabel"),l=r?r.value:"";ClearError(r,s,"Last name"),""===l?(ShowError("no-input",r,s,"Last name"),e=!1):ValidateRegex(t,l)||(ShowError("regex-fail",r,s,"Last name"),e=!1);const i=document.getElementById("email"),c=document.getElementById("emailLabel"),d=i?i.value:"";ClearError(i,c,"Email"),""===d?(ShowError("no-input",i,c,"Email"),e=!1):ValidateRegex(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,d)||(ShowError("regex-fail",i,c,"Email"),e=!1);const m=document.getElementById("message"),u=document.getElementById("messageLabel"),g=m?m.value:"";ClearError(m,u,"Message:"),g.length>300&&(ShowError("max-length",m,u,"Message:",300),e=!1);const p=document.querySelector('input[name="question"]:checked'),y=document.getElementById("questionLabel");return ClearError(p,y,"Question type:"),ValidateRadioGroup("question",p,y,"Question type:")||(e=!1),e},RunContactPageCode=()=>{const e=document.getElementById("contact-form");if(!e)return;e.addEventListener("submit",(e=>{if(!ValidateFormInput())return e.preventDefault(),!1}));const t=document.getElementById("google-map"),n=document.getElementsByClassName("google-map-popup")[0];t.addEventListener("mouseenter",(()=>{n.style.transform="translateX(-50%) translateY(0px)",n.style.opacity="1"})),t.addEventListener("mouseleave",(()=>{n.style.transform="translateX(-50%) translateY(20px)",n.style.opacity="0"}));const o=document.getElementById("add-review-btn"),a=document.getElementById("review-text"),r=document.getElementById("review-rating"),s=document.getElementById("reviews");let l=0;o.addEventListener("click",(()=>{const e=a.value.trim(),t=r.value;if(!e)return;l++;const n={1:5,2:4,3:3,4:2,5:1}[t],o="Rating: "+"★ ".repeat(n)+"☆ ".repeat(5-n),i=document.createElement("div");i.className="d-flex align-items-start mb-2 w-100";const c=new Date,d=c.getDate()+"."+(c.getMonth()+1)+"."+c.getFullYear();i.innerHTML=`\n <div class="me-3 fw-bold d-flex justify-content-center align-items-center rounded mt-1" style="\n width: 40px; \n height: 40px; \n background-color: #C29C6C; \n flex-shrink: 0;">\n ${l}\n </div>\n <div style="flex: 1; word-wrap: break-word; overflow-wrap: break-word; max-width: 90%;">\n <strong>${o}</strong>\n <p>${e}</p>\n <p class="mb-3 text-secondary">Post date: ${d}</p>\n </div>\n `,s.appendChild(i),a.value="",r.value="1"}))};